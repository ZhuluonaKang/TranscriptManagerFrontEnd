{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\76064\\\\transcript-manager\\\\src\\\\pages\\\\QueryPage.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useCallback, useMemo, useState, useEffect } from 'react';\nimport { CSVLink } from 'react-csv';\nimport * as XLSX from 'xlsx';\nimport NotificationBar from '../components/NotificationBar';\nimport TableComponent from '../components/TableComponent';\nimport SearchComponent from '../components/SearchComponent';\nimport { fetchExistingData, querySearchData } from '../api';\nimport '../styles.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst categoryList = ['Accounting', 'Communication', 'Curriculum', 'Dissertation', 'eBiz', 'Economics', 'Educ Subjects', 'Education Leadership', 'Entrepreneurship', 'Ethics/Soc Resp', 'Finance', 'Hardware', 'HR/ORG/Leader', 'International Business', 'IT General', 'Law', 'Legal', 'Management', 'Marketing', 'Networking', 'Operations Mgmt', 'Other Business', 'Other Education', 'Other Education Leadership', 'Other IT', 'Programming', 'Project Mgmt', 'Psychology', 'Research/Stats', 'Security', 'Strategy', 'Telecomm', 'TESOL/ESL/TFL'];\nconst educationLevels = ['Bachelor', 'Master', 'Doctorate'];\nconst ExportButtons = /*#__PURE__*/_s(/*#__PURE__*/React.memo(_c = _s(({\n  data\n}) => {\n  _s();\n  const headers = useMemo(() => [{\n    label: 'Educator',\n    key: 'educatorname'\n  }, {\n    label: 'Course Name',\n    key: 'course_name'\n  }, {\n    label: 'Credits Earned',\n    key: 'credits_earned'\n  }, {\n    label: 'Grade',\n    key: 'grade'\n  }, {\n    label: 'Category',\n    key: 'should_be_category'\n  }], []);\n  const exportToExcel = useCallback(() => {\n    if (!data || data.length === 0) return;\n    const worksheet = XLSX.utils.json_to_sheet(data);\n    const workbook = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(workbook, worksheet, 'Transcripts');\n    XLSX.writeFile(workbook, 'exported_data.xlsx');\n  }, [data]);\n  if (!data || data.length === 0) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"export-container\",\n    children: [/*#__PURE__*/_jsxDEV(CSVLink, {\n      data: data,\n      headers: headers,\n      filename: \"exported_data.csv\",\n      className: \"export-btn\",\n      children: \"Export as CSV\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"export-btn\",\n      onClick: exportToExcel,\n      children: \"Export as Excel\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 9\n  }, this);\n}, \"bHU5qXZy8MMJ4aPz7xYv/+aIjDM=\")), \"bHU5qXZy8MMJ4aPz7xYv/+aIjDM=\");\n_c2 = ExportButtons;\nconst QueryPage = () => {\n  _s2();\n  const [data, setData] = useState([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('');\n  const [selectedEducation, setSelectedEducation] = useState([]);\n  const [notification, setNotification] = useState('');\n  const [notificationType, setNotificationType] = useState('');\n  const [searched, setSearched] = useState(false);\n  useEffect(() => {\n    fetchExistingData().then(result => {\n      setData(result);\n      setNotification('Data loaded successfully.');\n      setNotificationType('success');\n    }).catch(() => {\n      setNotification('Error loading data.');\n      setNotificationType('error');\n    });\n  }, []);\n  const handleSearch = useCallback(async () => {\n    if (!searchQuery.trim() && !selectedCategory && selectedEducation.length === 0) {\n      setData([]);\n      setSearched(false);\n      return;\n    }\n    try {\n      const searchParams = {\n        query: searchQuery,\n        category: selectedCategory,\n        education: selectedEducation\n      };\n      const filteredData = await querySearchData(searchParams);\n      setData(filteredData);\n      setNotification('Search completed successfully.');\n      setNotificationType('success');\n      setSearched(true);\n    } catch (error) {\n      setNotification('Error during search.');\n      setNotificationType('error');\n    }\n  }, [searchQuery, selectedCategory, selectedEducation]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container query-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Query and Download\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(NotificationBar, {\n      message: notification,\n      type: notificationType\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(SearchComponent, {\n      searchQuery: searchQuery,\n      setSearchQuery: setSearchQuery,\n      selectedCategory: selectedCategory,\n      setSelectedCategory: setSelectedCategory,\n      selectedEducation: selectedEducation,\n      setSelectedEducation: setSelectedEducation,\n      handleSearch: handleSearch,\n      categoryList: categoryList,\n      educationLevels: educationLevels\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this), searched && data.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(TableComponent, {\n        data: data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(ExportButtons, {\n        data: data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 9\n  }, this);\n};\n_s2(QueryPage, \"1AmO28xgqdVM0dh2vFC35pveGas=\");\n_c3 = QueryPage;\nexport default QueryPage;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"ExportButtons$React.memo\");\n$RefreshReg$(_c2, \"ExportButtons\");\n$RefreshReg$(_c3, \"QueryPage\");","map":{"version":3,"names":["React","useCallback","useMemo","useState","useEffect","CSVLink","XLSX","NotificationBar","TableComponent","SearchComponent","fetchExistingData","querySearchData","jsxDEV","_jsxDEV","Fragment","_Fragment","categoryList","educationLevels","ExportButtons","_s","memo","_c","data","headers","label","key","exportToExcel","length","worksheet","utils","json_to_sheet","workbook","book_new","book_append_sheet","writeFile","className","children","filename","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c2","QueryPage","_s2","setData","searchQuery","setSearchQuery","selectedCategory","setSelectedCategory","selectedEducation","setSelectedEducation","notification","setNotification","notificationType","setNotificationType","searched","setSearched","then","result","catch","handleSearch","trim","searchParams","query","category","education","filteredData","error","message","type","_c3","$RefreshReg$"],"sources":["C:/Users/76064/transcript-manager/src/pages/QueryPage.js"],"sourcesContent":["import React, { useCallback, useMemo, useState, useEffect } from 'react';\r\nimport { CSVLink } from 'react-csv';\r\nimport * as XLSX from 'xlsx';\r\nimport NotificationBar from '../components/NotificationBar';\r\nimport TableComponent from '../components/TableComponent';\r\nimport SearchComponent from '../components/SearchComponent';\r\nimport { fetchExistingData, querySearchData } from '../api';\r\nimport '../styles.css';\r\n\r\nconst categoryList = [\r\n    'Accounting', 'Communication', 'Curriculum', 'Dissertation', 'eBiz', 'Economics', \r\n    'Educ Subjects', 'Education Leadership', 'Entrepreneurship', 'Ethics/Soc Resp', \r\n    'Finance', 'Hardware', 'HR/ORG/Leader', 'International Business', 'IT General', \r\n    'Law', 'Legal', 'Management', 'Marketing', 'Networking', 'Operations Mgmt', \r\n    'Other Business', 'Other Education', 'Other Education Leadership', 'Other IT', \r\n    'Programming', 'Project Mgmt', 'Psychology', 'Research/Stats', 'Security', \r\n    'Strategy', 'Telecomm', 'TESOL/ESL/TFL'\r\n];\r\n\r\nconst educationLevels = ['Bachelor', 'Master', 'Doctorate'];\r\n\r\nconst ExportButtons = React.memo(({ data }) => {\r\n    const headers = useMemo(() => [\r\n        { label: 'Educator', key: 'educatorname' },\r\n        { label: 'Course Name', key: 'course_name' },\r\n        { label: 'Credits Earned', key: 'credits_earned' },\r\n        { label: 'Grade', key: 'grade' },\r\n        { label: 'Category', key: 'should_be_category' }\r\n    ], []);\r\n\r\n    const exportToExcel = useCallback(() => {\r\n        if (!data || data.length === 0) return;\r\n        const worksheet = XLSX.utils.json_to_sheet(data);\r\n        const workbook = XLSX.utils.book_new();\r\n        XLSX.utils.book_append_sheet(workbook, worksheet, 'Transcripts');\r\n        XLSX.writeFile(workbook, 'exported_data.xlsx');\r\n    }, [data]);\r\n\r\n    if (!data || data.length === 0) return null;\r\n\r\n    return (\r\n        <div className=\"export-container\">\r\n            <CSVLink data={data} headers={headers} filename=\"exported_data.csv\" className=\"export-btn\">\r\n                Export as CSV\r\n            </CSVLink>\r\n            <button className=\"export-btn\" onClick={exportToExcel}>Export as Excel</button>\r\n        </div>\r\n    );\r\n});\r\n\r\nconst QueryPage = () => {\r\n    const [data, setData] = useState([]);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [selectedCategory, setSelectedCategory] = useState('');\r\n    const [selectedEducation, setSelectedEducation] = useState([]);\r\n    const [notification, setNotification] = useState('');\r\n    const [notificationType, setNotificationType] = useState('');\r\n    const [searched, setSearched] = useState(false);\r\n\r\n    useEffect(() => {\r\n        fetchExistingData()\r\n            .then(result => {\r\n                setData(result);\r\n                setNotification('Data loaded successfully.');\r\n                setNotificationType('success');\r\n            })\r\n            .catch(() => {\r\n                setNotification('Error loading data.');\r\n                setNotificationType('error');\r\n            });\r\n    }, []);\r\n\r\n    const handleSearch = useCallback(async () => {\r\n        if (!searchQuery.trim() && !selectedCategory && selectedEducation.length === 0) {\r\n            setData([]);\r\n            setSearched(false);\r\n            return;\r\n        }\r\n        try {\r\n            const searchParams = { query: searchQuery, category: selectedCategory, education: selectedEducation };\r\n            const filteredData = await querySearchData(searchParams);\r\n            setData(filteredData);\r\n            setNotification('Search completed successfully.');\r\n            setNotificationType('success');\r\n            setSearched(true);\r\n        } catch (error) {\r\n            setNotification('Error during search.');\r\n            setNotificationType('error');\r\n        }\r\n    }, [searchQuery, selectedCategory, selectedEducation]);\r\n\r\n    return (\r\n        <div className=\"container query-page\">\r\n            <h1>Query and Download</h1>\r\n            <NotificationBar message={notification} type={notificationType} />\r\n            <SearchComponent\r\n                searchQuery={searchQuery}\r\n                setSearchQuery={setSearchQuery}\r\n                selectedCategory={selectedCategory}\r\n                setSelectedCategory={setSelectedCategory}\r\n                selectedEducation={selectedEducation}\r\n                setSelectedEducation={setSelectedEducation}\r\n                handleSearch={handleSearch}\r\n                categoryList={categoryList}\r\n                educationLevels={educationLevels}\r\n            />\r\n            {searched && data.length > 0 && (\r\n                <>\r\n                    <TableComponent data={data} />\r\n                    <ExportButtons data={data} />\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default QueryPage;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}